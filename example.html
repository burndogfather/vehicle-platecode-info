<!DOCTYPE html>
<html lang='ko'>
	<head>
		<title>í•œêµ­ ì°¨ëŸ‰ë²ˆí˜¸ ì •ë³´ì¡°íšŒ</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta charset='utf-8'>
		<meta http-equiv='X-UA-Compatible' content='IE=edge'>
		<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
		<style>
			table{
				width:100%;
			}
			table tbody td{
				border:1px solid #000;
			}
		</style>
	</head>
	<body>
		<h1>ğŸ‡°ğŸ‡· í•œêµ­ ì°¨ëŸ‰ë²ˆí˜¸ ì •ë³´ì¡°íšŒ</h1>
		<input type='text' placeholder='ì°¨ëŸ‰ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”' value='ì¶©ë¶80ë°°2929' />
		<button onclick='inquiry();'>ì¡°íšŒ!</button>
		
		<hr color="#000"/>
		
		<table>
			<thead>
				<colgroup>
					<col width="100px">
					<col>
				</colgroup>
			</thead>
			<tbody>
				<tr>
					<td>ì°¨ëŸ‰ë²ˆí˜¸</td>
					<td id='platecode'></td>
				</tr>
				<tr>
					<td>ì°¨ëŸ‰ëª…</td>
					<td id='name'></td>
				</tr>
				<tr>
					<td>ì°¨ëŸ‰í˜•ì‹</td>
					<td id='type'></td>
				</tr>
				<tr>
					<td>ì°¨ëŸ‰ì—°ì‹</td>
					<td id='year'></td>
				</tr>
				<tr>
					<td>í‰ê· ë§¤ë§¤ê¸ˆì•¡</td>
					<td id='price'></td>
				</tr>
			</tbody>
		</table>
		
		
		<script type='text/javascript'>
			function inquiry(){
				document.querySelector('input[type="text"]').setAttribute('disabled', 'disabled');
				document.querySelector('button').setAttribute('disabled', 'disabled');
				document.querySelector('button').innerText = 'ì¡°íšŒì¤‘ì…ë‹ˆë‹¤';
				
				let platecode = document.querySelector('input[type="text"]').value;
				
				fetch('https://coco.sqs.kr/vehicle-platecode/',{
					method : 'POST',
					headers: { 'Content-Type': 'application/x-www-form-urlencoded'},
					body: new URLSearchParams({
						platecode: platecode
					})
				}).then((response) => {
					if(!response.ok){
						  throw new Error('400 or 500 ì—ëŸ¬ ë°œìƒ');
					}
					return response.json();
				}).then((data)=>{
					
					document.querySelector('input[type="text"]').removeAttribute('disabled');
					document.querySelector('button').removeAttribute('disabled');
					document.querySelector('button').innerText = 'ì¡°íšŒ!';
					
					if(data.status === 'success'){
						
						document.querySelector('#platecode').innerText = data.platecode;
						document.querySelector('#name').innerText = data.name;
						document.querySelector('#type').innerText = data.type;
						document.querySelector('#year').innerText = data.year;
						document.querySelector('#price').innerText = data.price;
						alert('ì¡°íšŒê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤');
						
					}else{
						
						document.querySelector('#platecode').innerText = '';
						document.querySelector('#name').innerText = '';
						document.querySelector('#type').innerText = '';
						document.querySelector('#year').innerText = '';
						document.querySelector('#price').innerText = '';
						if(data.errormsg){
							alert(data.errormsg);
						}
						
					}
					
					console.log(data);
				}).catch(() => {
					
					document.querySelector('input[type="text"]').removeAttribute('disabled');
					document.querySelector('button').removeAttribute('disabled');
					document.querySelector('button').innerText = 'ì¡°íšŒ!';
					
					document.querySelector('#platecode').innerText = '';
					document.querySelector('#name').innerText = '';
					document.querySelector('#type').innerText = '';
					document.querySelector('#year').innerText = '';
					document.querySelector('#price').innerText = '';
					
					alert('ì¡°íšŒê°€ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤');
				});
				
			};
			
			
		</script>
	</body>
</html>